<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body class="container">

    <div class="container">
        
        
        <div class="row">
            <div class="col-md-12">
                BIENVENIDO
            </div>
        </div>


        <div class="row">


            <div class="col-md-6" id="pa">
                <div class="form-group">
                    <input type="text" id="pAbierta" class="form-control" placeholder="Pregunta abierta">
                </div>
            </div>

            <div class="col-md-6" style="display: none;" id="pyr">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Preguntas y respuestas" id="pRepuestas">
                </div>
                <br>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Repsuesta 1" id="R1">
                </div>

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Repsuesta 2" id="R2">
                </div>

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Repsuesta 3" id="R3">
                </div>
            </div>

            <div class="col-md-6" style="display: none;" id="pe">
                <div class="form-group">
                    <input type="text" id="pTest" class="form-control" placeholder="Preguntas de pruebas">
                </div>
            </div>
    
    
    
            <div class="col-md-6">
                <select name="option" class="form-control" id="select">
                    <option value="pa">Pregunta abierta</option>
                    <option value="pyr">Pregunta y respuestas</option>
                    <option value="pe">Pregunta de etc</option>
                </select>

                <hr><hr>

                <div class="col-md-12" id="preguntas">

                    <!-- DIBUJAR -->

                </div>
            </div>

<br><br>
            <div class="col-md-12"><button class="btn btn-outline-danger" onclick="ver()">Enviar</button></div>
    
    
        </div>


    </div>




    <script>
        var select = document.getElementById('select');
        var pa = document.getElementById('pa');
        var pyr = document.getElementById('pyr');
        var pe = document.getElementById('pe');
        
        var p1 = document.getElementById('pAbierta');
        var p2 = document.getElementById('pRepuestas');
        var p3 = document.getElementById('pTest');

        var r1 = document.getElementById('R1');
        var r2 = document.getElementById('R2');
        var r3 = document.getElementById('R3');
        
        var p = document.getElementById('preguntas');

        


        var option = select.value;
        var array = [];
        

        select.addEventListener('change', (event) => {
            validar(event.target.value);
            var op = event.target.value;
            // var xd = '';
            // option 
            if(option == 'pa') {xd =  p1.value ; console.log(option);}
            if(option == 'pyr'){ xd =  p2.value ; console.log(option);}
            if(option == 'pe') xd =  p3.value ;



            var objeto = {
                type: option,
                question: xd,
                multiple: option != 'pyr' ? [] : [
                    r1.value,
                    r2.value,
                    r3.value
                ],
            };


            option = op;


            console.log(objeto);
            array.push(objeto);
            draw();
            cleanner();
        });

        function draw() {

            p.innerHTML = '';

            array.forEach((item, i) => {
                // console.log({item: item});
                p.append(
                    `
                    Numero: ${i + 1} || 
                    Pregunta: ${item.question} || 
                    Tipo: ${item.type} || 
                    ........................................................................................................
                    `
                );

                console.log(item.multiple);

                if(item.multiple != []) {
                    item.multiple.forEach((item, i) => {
                        p.append(
                            `
                            posible ${i+1} =>  ${item}
    
                            `
                        );
                    });
                }


                p.append( '==================================' );
            });

        }

        function ver() {
            console.log(array);
        }

        function cleanner() {
            p1.value = '';
            p2.value = '';
            p3.value = '';

            r1.value = '';
            r2.value = '';
            r3.value = '';
        }

        function validar(option) {
            if (option == 'pa') {
                pa.style.display = 'block';
                pyr.style.display = 'none';
                pe.style.display = 'none';
            }

            if (option == 'pyr') {
                pyr.style.display = 'block';
                pa.style.display = 'none';
                pe.style.display = 'none';
            }

            if (option == 'pe') {
                pe.style.display = 'block';
                pyr.style.display = 'none';
                pa.style.display = 'none';
            }
        }


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>